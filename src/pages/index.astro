---
import { Image } from "astro:assets";
import "../styles/global.css";

const { PageTitle } = Astro.props;

const myTags = [
  	"åºŸè¯è¾“å‡ºæœºå™¨ğŸ¤",
	"é‡åº¦æ‹–å»¶ç—‡ğŸ˜ª",
	"å‡†æ—¶emoğŸŒ§ï¸",
	"ç†¬å¤œå† å†›ğŸŒ ",
	"äººä¹‹å¸¸æƒ…ğŸ˜",
	"Need foodğŸ¥£",
];
---

<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <meta name="generator" content={Astro.generator} />
        <title>è¢æŸäººä¸»é¡µ - MrYuan's Homepage</title>
        <link rel="icon" type="image/x-icon" href="/avatar.webp" />
        <meta name="keywords" content="è¢æŸäºº,è¢æŸ,ä¸ªäººç½‘ç«™,ä¸ªäººä¸»é¡µ,åšå®¢,ç•™è¨€ç°¿" />
        <meta name="description" content="è¢æŸäººçš„ä¸ªäººä¸»é¡µï¼Œè®°å½•ç”Ÿæ´»ç‚¹æ»´ä¸æ€æƒ³ç«èŠ±ã€‚" />
    </head>
    <body ontouchstart="ontouchstart" class="font-mono bg-neutral-50 dark:bg-neutral-900 dark:text-neutral-400">
        
        <main class="container mx-auto w-full max-w-2xl p-6">
			<Image src="/avatar.webp" alt="å¤´åƒ" width={100} height={100} class="mb-12 size-6 rounded-full outline-2 outline-offset-2 outline-dashed outline-neutral-200 dark:outline-neutral-700"/>
			<div class="space-y-8 text-lg font-medium text-neutral-600 dark:text-neutral-400">
				
                <div>ğŸ‘‹ æ¬¢è¿æ¥è®¿<br><span id="randTitle"></span></div>

				<div>ğŸ‘€ ä½ æ˜¯ç¬¬ <span id="currentViews">...</span> ä½è®¿å®¢</div>

				<div>æˆ‘æ­£åœ¨ï¼šã€<span id="currentStatus">...</span>ã€</div>

				<div class="mb-2 font-semibold text-neutral-800 dark:text-neutral-200">ğŸ˜‰å…³äºæˆ‘</div>

				<div>æˆ‘æ˜¯ä¸€åæç®€ä¸»ä¹‰è€…ï¼Œå–œæ¬¢ç”¨æ–‡å­—å’Œ emoji è®°å½•ç”Ÿæ´»ã€‚</div>
				
				<div class="flex items-center gap-2">
					<div class="font-semibold text-neutral-800 dark:text-neutral-200">âœï¸ç•™è¨€ç°¿</div>
					<a href="https://jb18.cm/guestbook/" target="_blank" class="transition active:scale-95"><span class="bg-[#DFE9D0] font-light text-base rounded-full py-1 px-3 dark:bg-[#3E4E42] dark:text-neutral-300 tabular-nums"><span id="commentsCount" class="underline">...</span>æ¡è®°å½•</span></a>
				</div>

				<div class="space-y-2">
					<div class="font-semibold text-neutral-800 dark:text-neutral-300">ğŸ·ï¸æ ‡ç­¾</div>
					<div class="flex flex-wrap items-center gap-2">
						{myTags.map((tag, index) => (
							<span 
								class="bg-[#DFE9D0] font-light text-base rounded-full py-1 px-3 dark:bg-[#3E4E42] dark:text-neutral-300"
							>
								{tag}
							</span>
						))}
					</div>
				</div>
				
				<div class="mb-2 font-semibold text-neutral-800 dark:text-neutral-200">ğŸ’¡æ·±å…¥æ´å¯Ÿ</div>

				<div>...</div>

				<a 
				class="inline-flex items-center gap-1 rounded-lg px-4 py-2 font-normal text-base cursor-pointer transition active:scale-95 bg-neutral-200/70 hover:bg-neutral-200 active:bg-neutral-300 dark:bg-neutral-800 dark:hover:bg-neutral-700 dark:active:bg-neutral-600 text-neutral-800 dark:text-neutral-200" 
				href="https://jb18.cm" 
				target="_blank"
				>
					è®¿é—®æˆ‘çš„åšå®¢
					<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="size-4"><path d="M20 12L4 12" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/><path d="M12.9676 19.6606L19.5404 13.0878C19.684 12.9454 19.798 12.776 19.8757 12.5892C19.9536 12.4025 19.9936 12.2023 19.9936 12C19.9936 11.7977 19.9536 11.5975 19.8757 11.4108C19.798 11.224 19.684 11.0546 19.5404 10.9123L12.9676 4.33942" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
				</a>
			</div>
		</main>

    </body>
</html>

<script>


    function randomTitle() {
        const randTitles = [
            "å¥½ä¹…ä¸è§ï¼Œä»Šå¤©è¿‡å¾—å¼€å¿ƒå—ï¼Ÿ",
            "ä¸‡ç‰©å¯çˆ±ï¼Œæ„¿ä½ ä»Šå¤©ä¹Ÿæœ‰ä¸€ä»½å¥½å¿ƒæƒ…ã€‚",
            "è¿™é‡Œçš„æ¯ä¸€è¡Œå­—ï¼Œéƒ½æ˜¯é€ç»™ä½ çš„ç¤¼ç‰©ã€‚",
            "åœä¸‹æ¥ï¼Œå¹å¹é£ï¼Œçœ‹çœ‹è¿™é‡Œçš„æ–‡å­—ã€‚",
            "ä¿æŒå¥½å¥‡ï¼Œä¸–ç•Œæ¯”ä½ æƒ³è±¡çš„æ›´å®½å¹¿ã€‚",
            "ä¸‡ç‰©çš†æœ‰è£‚ç—•ï¼Œé‚£æ˜¯å…‰ç…§è¿›æ¥çš„åœ°æ–¹ã€‚",
            "åœ¨æœ‰é™çš„æ—¶é—´é‡Œï¼Œå»æ¢ç´¢æ— é™çš„å¯èƒ½ã€‚",
            "è®°å½•ï¼Œæ˜¯ä¸ºäº†ä¸è¢«é—å¿˜ã€‚",
            "ä½ å¥½ï¼Œå¾ˆé«˜å…´åœ¨è¿™é‡Œä¸ä½ æ€æƒ³å…±æŒ¯ã€‚",
            "ä»Šå¤©æ‰“ç®—åšç‚¹ä»€ä¹ˆæœ‰è¶£çš„äº‹ï¼Ÿ",
            "ä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´ä¸‹ä¸€åœºå±±æµ·ã€‚",
            "æ¯ä¸€ä¸ªä¸æ›¾èµ·èˆçš„æ—¥å­ï¼Œéƒ½æ˜¯å¯¹ç”Ÿå‘½çš„è¾œè´Ÿã€‚",
            "æ—¢ç„¶æ¥äº†ï¼Œå°±å¤šåä¸€ä¼šå§ã€‚",
            "åœ¨è¿™é‡Œï¼Œå‘ç°æ–‡å­—çš„æ¸©åº¦ã€‚",
            "ç”Ÿæ´»ç¢ç‰‡ï¼Œéƒ½åœ¨è¿™é‡Œæ‹¼å‡‘å®Œæ•´ã€‚"
        ];

        const randTitle = document.getElementById("randTitle");
        if (randTitle) {
            const storedTitle = sessionStorage.getItem("randomTitle");
            if (storedTitle) {
                randTitle.innerText = storedTitle;
            } else {
                const randomTitle = randTitles[Math.floor(Math.random() * randTitles.length)];
                sessionStorage.setItem("randomTitle", randomTitle);
                randTitle.innerText = randomTitle;
            }
        }
    }

    async function fetchData() {
        const cacheKey = 'pageData';
        const cached = sessionStorage.getItem(cacheKey);
        
        if (cached) {
            const data = JSON.parse(cached);
            updateUI(data);
            return;
        }
        
        try {
            const [commentsRes, statusRes] = await Promise.all([
                fetch('https://api.github.com/repos/ymc0182/comments/discussions'),
                fetch('/api/status')
            ]);
            
            const commentsData = await commentsRes.json();
            const statusData = await statusRes.json();
            
            const totalComments = commentsData.reduce((sum, item) => sum + item.comments, 0);
            
            const mergedData = {
                ...statusData,
                commentsCount: totalComments
            };
            
            sessionStorage.setItem(cacheKey, JSON.stringify(mergedData));
            updateUI(mergedData);
        } catch (error) {
            console.error('Failed to fetch data:', error);
        }
    }

    function updateUI(data) {
        document.getElementById('currentViews').textContent = data.views.toLocaleString();
        document.getElementById('currentStatus').textContent = data.status;
        document.getElementById('commentsCount').textContent = data.commentsCount;
    }

    document.addEventListener('DOMContentLoaded', () => {
        randomTitle();
        fetchData();
    });
</script>
